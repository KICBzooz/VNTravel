@model VNTravel.Models.Room

@{
    ViewBag.Title = "DetailRoom";
    Layout = "~/Views/Shared/_Layout.cshtml";
    //var listsuggest = Session["ListSuggest"] as VNTravel.Models.Room;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <title>Deluxe - Free Bootstrap 4 Template by Colorlib</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700,700i" rel="stylesheet">
    <style>
        body {
            font-family: Poppins, Arial, sans-serif;
            font-size: 15px;
            line-height: 1.8;
            font-weight: 400;
            color: gray;
            background: rgb(255, 255, 255);
        }
        .text-detailroom {
            margin: 20px 0px 0px 0px;
        }
        ul {
            display: block;
            list-style-type: disc;
            margin-block-start: 1em;
            margin-block-end: 1em;
            margin-inline-start: 0px;
            margin-inline-end: 0px;
            padding-inline-start: 40px;
        }
        h1, h2, h3, h4, h5, .h1, .h2, .h3, .h4, .h5 {
            line-height: 1.5;
            color: rgb(0, 0, 0);
            font-weight: 400;
            font-family: "Playfair Display", Arial, serif;
        }
    </style>
</head>

<body>
    <section class="ftco-section">
        <div class="container">
            <div class="row">
                <ol class="breadcrumb">
                    <li><a href="~/home/#"><i class="fa fa-home"></i> Trang chủ <i class="fa fa-angle-right"></i></a></li>
                    <li><a href="~/Hotel/Hotel">Khách sạn <i class="fa fa-angle-right"></i></a></li>
                    <li class="active">@Model.Accompany.Accompany_name với @Model.Room_Type1.room_name</li>
                </ol>
                <div class="col-lg-8">
                    <div class="row">
                        <div class="col-md-12 ftco-animate">
                            <h2 class="mb-4">Loại Phòng: @Model.Room_Type1.room_name</h2>
                            <div class="single-slider owl-carousel">
                                <div class="item">
                                    @*<img class="room-img" src="@Url.Content(Model.Room_image)" alt="Hotel" />*@
                                    <img src="~/Img/vinh-ha-long.jpg" />
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 room-single mt-4 mb-5 ftco-animate text-detailroom">
                            <p>
                                Chào mừng bạn đến với VTRAVEL - nơi lưu trú đẳng cấp, nơi bạn có thể trải nghiệm sự thoải mái và tiện nghi hoàn hảo. Phòng nghỉ tại chúng tôi được thiết kế để mang đến cho bạn không gian sống sang trọng và trải nghiệm nghỉ dưỡng tuyệt vời.
                            </p>
                            <div class="d-md-flex mt-5 mb-5">
                                <ul class="list">
                                    <li><span>Số Phòng:</span> @Model.Room_number</li>
                                    @*<li><span>Size:</span> 45 m2</li>*@
                                </ul>
                                @*<ul class="list ml-md-5">
                            <li><span>View:</span> Sea View</li>
                            <li><span>Bed:</span> 1</li>
                        </ul>*@
                                <ul class="list ml-md-5">
                                    <li><span>Giá:</span> @Model.Room_Type1.Price.price1</li>
                                </ul>
                            </div>
                            <p>
                                Hãy đặt phòng ngay hôm nay để tận hưởng trọn vẹn kỳ nghỉ của bạn tại VTRAVEL - nơi hòa mình vào không gian sang trọng và yên bình. Chúng tôi hứa sẽ mang đến cho bạn trải nghiệm lưu trú không thể quên.
                            </p>
                        </div>
                    </div>
                </div>
                <div style="height:max-content;margin-left:45px;margin-top:75px;border-left:double" class="col-lg-3 ">
                    <h2 class="mb-4">Các gợi ý tương tự</h2>
                    @foreach (var item in (Session["ListSuggest"] as List<VNTravel.Models.Room>))
                    {
                        <div class="card-deck" style="margin-bottom:15px">
                            <div class="card" style="width: auto; border: groove">
                                <img class="card-img-top img-thumbnail" src="~/Img/vinh-ha-long.jpg" alt="Card image cap">

                                <div class="card-body row">
                                    <div class=" col-lg-6">
                                        <a style="margin-left:5px;">Id số phòng: @item.Room_number</a>
                                    </div>
                                    <div class=" col-lg-6">
                                        <a class="">Giá: @item.Room_Type1.Price.price1</a>
                                    </div>
                                    <div class=" col-lg-12" style="padding:-5px 0px -8px 0px">
                                        <small>Some quick example text to build on the card title and make up the bulk of the card's content.</small>
                                        <div class="d-flex justify-content-between mb-3">
                                            <div class="ps-2">
                                                <small class="fa fa-star text-primary"></small>
                                                <small class="fa fa-star text-primary"></small>
                                                <small class="fa fa-star text-primary"></small>
                                                <small class="fa fa-star text-primary"></small>
                                                <small class="fa fa-star text-primary"></small>
                                            </div>
                                        </div>
                                        <div class="d-flex mb-3">
                                            <small class="border-end me-3 pe-3">Kiểu Phòng: @item.Room_Type1.room_name</small>
                                        </div>
                                        <div class="d-flex justify-content-between">
                                            <a class="btn btn-sm btn-primary rounded py-2 px-4" href="@Url.Action("DetailRoom","Hotel", new { id = item.Room_number})">Xem Thêm</a>
                                            <a class="custom btn btn-sm btn-dark rounded py-2 px-4" href="@Url.Action("Book","Hotel", new { id = item.Room_number})">Đặt Ngay</a>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    }

                </div>
            </div>
            </div>
    </section>
    <div href="@Url.Action("Book","Hotel", new { id = Model.Room_number})">
        <button class="btn-book">Đặt Ngay</button>
    </div>
    <hr />
    <h4>Comments...</h4>
    <div class="comments-container">
        <div class="comment">
            @foreach (var c in Model.Comments)
            {
                if (Model.Room_number == c.Room_number)
                {
                    <div>
                        <strong>@c.Username:</strong> @c.Content
                    </div>
                    if (Session["Accompany_ID"] != null)
                    {
                        <a class="FuncDel" href="@Url.Action("ManageComments","Hotel", new { Room_number = c.Room_number, id_comment = c.ID_Comment})">Xóa</a>
                    }
                }
            }
            <style>
                .comment {
                    display: flex;
                    justify-content: space-between;
                }

                .FuncDel {
                    cursor: pointer;
                    margin: 0px 0px 0px 10px;
                    line-height: 40px;
                }
            </style>
        </div>
        @using (Html.BeginForm("Comment", "Hotel", FormMethod.Post, new { id = "commentForm" }))
        {
            @Html.Hidden("Room_number", Model.Room_number)
            <textarea placeholder="Write a comment" name="cmt"></textarea>
            <button type="submit">Submit</button>
        }
        @if (Session["Comment"] != null)
        {
            <script>
                alert("Vui lòng đăng nhập để bình luận.");
            </script>
            Session.Remove("Comment");
        }
    </div>
    <style>
        .comments-container {
            max-width: 600px;
            padding: 20px;
            background-color: #f5f5f5;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .comment {
            margin-bottom: 15px;
        }

            .comment div {
                width:100%;
                background-color: #fff;
                padding: 10px;
                border-radius: 5px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                margin-bottom: 10px;
            }

            .comment strong {
                color: #3498db;
            }

        #commentForm {
            margin-top: 20px;
        }

            #commentForm textarea {
                width: 100%;
                padding: 10px;
                margin-bottom: 10px;
                border: 1px solid #ddd;
                border-radius: 5px;
            }

            #commentForm button {
                background-color: #3498db;
                color: #fff;
                padding: 10px 15px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s ease;
            }

                #commentForm button:hover {
                    background-color: #2980b9;
                }
        .btn-book {
            display: inline-block;
            padding: 15px 25px;
            font-size: 16px;
            text-align: center;
            text-decoration: none;
            background-color: #ffffff;
            color: #000000;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

            .btn-book:hover {
                background-color: #2980b9;
                color: #FFFFFF;
            }
    </style>

    <script>
        $(document).ready(function () {
            $('form').submit(function (event) {
                event.preventDefault();
                var form = $(this);
                $.ajax({
                    type: form.attr('method'),
                    url: form.attr('action'),
                    data: form.serialize(),
                    success: function (response) {
                        // Hiển thị bình luận mới ngay lập tức
                        var commentsContainer = form.closest('.comments-container');
                        commentsContainer.append(response);
                        // Xóa nội dung textarea
                        form.find('textarea').val('');
                    }
                });
            });
        });
    </script>
</body>

</html>
